<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.laughingather.gulimall.product.dao.SkuInfoDao">
    <!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="com.laughingather.gulimall.product.entity.SkuInfoEntity" id="skuInfoMap">
        <result property="skuId" column="sku_id"/>
        <result property="spuId" column="spu_id"/>
        <result property="skuName" column="sku_name"/>
        <result property="skuDesc" column="sku_desc"/>
        <result property="catalogId" column="catalog_id"/>
        <result property="brandId" column="brand_id"/>
        <result property="skuDefaultImg" column="sku_default_img"/>
        <result property="skuTitle" column="sku_title"/>
        <result property="skuSubtitle" column="sku_subtitle"/>
        <result property="price" column="price"/>
        <result property="saleCount" column="sale_count"/>
    </resultMap>

    <select id="pageSkuInfoByParams" resultMap="skuInfoMap">
        SELECT sku_id,
               spu_id,
               sku_name,
               sku_desc,
               catalog_id,
               brand_id,
               sku_default_img,
               sku_title,
               sku_subtitle,
               price,
               sale_count
        FROM pms_sku_info
        <where>
            <if test="params.key != null and params.key != ''">
                AND (sku_name LIKE CONCAT('%', #{params.key}, '%') OR
                     pms_sku_info.sku_desc LIKE CONCAT('%', #{params.key}, '%'))
            </if>
            <if test="params.catalogId != null and params.catalogId != 0">
                AND catalog_id = #{params.catalogId}
            </if>
            <if test="params.brandId != null and params.brandId != 0">
                AND brand_id = #{params.brandId}
            </if>
            <if test="params.min != null and params.min != 0">
                AND price &gt; #{params.min}
            </if>
            <if test="params.max != null and params.max != 0">
                AND price &lt; #{params.max}
            </if>
        </where>
    </select>
</mapper>